<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Depurador DAP</title>
    <!-- Bootstrap CSS desde CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Agregar iconos de FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
        #sourceCode div, #runningCode div {
            white-space: pre;
            font-family: monospace;
        }
        #sourceCode {
            height: 400px;
            overflow-y: scroll;
        }
        #runningCode {
            height: 400px;
            overflow-y: scroll;
        }
        /* Estilos para la lista de breakpoints */
        #breakpointsList {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Eliminamos el título principal -->
        <!-- <h1 class="mt-4">Cliente DAP con Fiber y Go</h1> -->

        <!-- Formulario de conexión -->
        <div class="card mt-4">
            <div class="card-header">Conectar al servidor DAP</div>
            <div class="card-body">
                <div class="form-row">
                    <div class="col">
                        <input type="text" id="address" class="form-control" placeholder="Dirección" value="127.0.0.1">
                    </div>
                    <div class="col">
                        <input type="text" id="port" class="form-control" placeholder="Puerto" value="12345">
                    </div>
                    <div class="col">
                        <input type="text" id="programPath" class="form-control" placeholder="Ruta del programa" value="/Users/arturoeliasanton/tmp/prueba1">
                    </div>
                    <div class="col">
                        <button class="btn btn-primary" onclick="connect()" id="connectButton">Conectar</button>
                        <button class="btn btn-danger" onclick="disconnect()" id="disconnectButton" disabled>Desconectar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel de control -->
        <div class="card mt-4">
            <div class="card-header">Controles de Depuración</div>
            <div class="card-body">
                <div class="form-row align-items-center">
                    <div class="col-auto">
                        <!-- Select para rutas de archivos -->
                        <select id="filePath" class="form-control" onchange="loadSourceCode()">
                            <option value="">Selecciona un archivo</option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <!-- Botón de refrescar archivos -->
                        <button class="btn btn-secondary" onclick="refreshFiles()" title="Refrescar Archivos">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="col-auto">
                        <input type="number" id="lineNumber" class="form-control" placeholder="Número de línea">
                    </div>
                    <div class="col-auto">
                        <button class="btn btn-secondary" onclick="setBreakpoint()">Establecer Breakpoint</button>
                    </div>
                    <!-- Botones de control de depuración con iconos -->
                    <div class="col-auto">
                        <button class="btn btn-success" onclick="continueExecution()" title="Continuar">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="btn btn-warning" onclick="pause()" title="Pausar">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="btn btn-info" onclick="stepIn()" title="Step In">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button class="btn btn-info" onclick="stepOver()" title="Step Over">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="btn btn-info" onclick="stepOut()" title="Step Out">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de Breakpoints -->
        <div class="card mt-4">
            <div class="card-header">Breakpoints Actuales</div>
            <div class="card-body">
                <ul id="breakpointsList" class="list-group">
                    <!-- Lista de breakpoints -->
                </ul>
            </div>
        </div>

        <!-- Mostrar código fuente y código en ejecución -->
        <div class="row mt-4">
            <div class="col-md-6">
                <h4>Código Fuente</h4>
                <pre id="sourceCode" style="background-color: #f8f9fa; padding: 10px; border: 1px solid #ced4da;"></pre>
            </div>
            <div class="col-md-6">
                <h4>Código en Ejecución</h4>
                <pre id="runningCode" style="background-color: #f8f9fa; padding: 10px; border: 1px solid #ced4da;"></pre>
            </div>
        </div>

        <!-- Mostrar variables -->
        <div class="row mt-4">
            <div class="col-md-12">
                <h4>Variables</h4>
                <pre id="variables" style="background-color: #f8f9fa; padding: 10px; border: 1px solid #ced4da;"></pre>
            </div>
        </div>

        <!-- Output -->
        <div class="mt-4">
            <h4>Output</h4>
            <pre id="output" style="background-color: #f8f9fa; padding: 10px; border: 1px solid #ced4da; height: 200px; overflow-y: scroll;"></pre>
        </div>
    </div>

    <!-- jQuery y Bootstrap JS desde CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- FontAwesome para los iconos -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="app.js"></script>
</body>
</html>